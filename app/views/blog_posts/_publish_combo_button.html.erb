<% if can?(current_person, :update_blog_post, blog_post) %>
  <% btn_group_class ||= "pull-right" %>
<% if blog_post.published? %>
  <% btn_class = 'btn-warning' %>
<% btn_link = link_to 'Unpublish', unpublish_blog_post_path(blog_post) %>
<% else %>
  <% btn_class = 'btn-success' %>
<% btn_link = link_to 'Publish', publish_blog_post_path(blog_post) %>
<% end %>

<div class="blog-post-admin-button-partial btn-group <%= "#{btn_group_class}" %>">
  <button type="button" class="btn <%= "#{btn_class}" %>"><%= btn_link %></button>
  <button type="button" class="btn <%= "#{btn_class}" %> dropdown-toggle" data-toggle="dropdown">
    <span class="glyphicon glyphicon-cog"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><%= link_to "Edit <span class='pull-right glyphicon glyphicon-pencil'></span>".html_safe, edit_blog_post_path(blog_post) %></li>
    <li class="divider"></li>
    <li><%= link_to "Delete <span class='pull-right glyphicon glyphicon-remove-circle'></span>".html_safe, blog_post_path(blog_post), method: :delete %></li>
  </ul>
</div>
<% end %>
